<html>

<head>
  <style>
    .editor {
      border: solid 1px #ccc;
      padding: 20px;
      min-height: 200px;
    }

    .sample-toolbar {
      border: solid 1px #ddd;
      background: #f4f4f4;
      padding: 5px;
      border-radius: 3px;
    }

    .sample-toolbar>span {
      cursor: pointer;
    }

    .sample-toolbar>span:hover {
      text-decoration: underline;
    }
  </style>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link
    href='https://fonts.googleapis.com/css?family=Montez|Lobster|Josefin+Sans|Shadows+Into+Light|Pacifico|Amatic+SC:700|Orbitron:400,900|Rokkitt|Righteous|Dancing+Script:700|Bangers|Chewy|Sigmar+One|Architects+Daughter|Abril+Fatface|Covered+By+Your+Grace|Kaushan+Script|Gloria+Hallelujah|Satisfy|Lobster+Two:700|Comfortaa:700|Cinzel|Courgette'
    rel='stylesheet' type='text/css'>
</head>

<body>

  <a href="javascript:void(0)" onclick="format('bold')"><span class="fa fa-bold fa-fw"></span></a>
  <a href="javascript:void(0)" onclick="format('italic')"><span class="fa fa-italic fa-fw"></span></a>
  <a href="javascript:void(0)" onclick="format('insertunorderedlist')"><span class="fa fa-list fa-fw"></span></a>
  <a href="javascript:void(0)" onclick="saveAsTxt()"><span class="fa fa-download fa-fw"></span></a>
  <input type="text" id="rowNum">
  <input type="text" id="columnNum">
  <a href="javascript:void(0)" onclick="tableCreate()"><span class="fa fa-table fa-fw"></span></a>

  <main id="sampleeditor" contenteditable="true">
    <p>Lorem ipsum</p>
  </main>
  <select id="selecth1FontFamily" name="selectFontFamily" onchange="updateh1family();">
    <option> Serif </option>
    <option> Arial </option>
    <option> Sans-Serif </option>
    <option> Tahoma </option>
    <option> Verdana </option>
    <option> Lucida Sans Unicode </option>
  </select>

  <canvas width="200" height="200"></canvas>
  <script>
    window.addEventListener('load', function () {
      document.getElementById('sampleeditor').setAttribute('contenteditable', 'true');
    });

    function format(command, value) {
      document.execCommand(command, false, value);
    }

    document.getElementById("sampleeditor").innerHTML =
      localStorage["text"] || "Just Write"; // default text

    setInterval(function () {
      // fuction that is saving the innerHTML of the div

      localStorage["text"] = document.getElementById("sampleeditor").innerHTML; // content div
    }, 1000);

    function updateh1family() {
      var selector = document.getElementById('selecth1FontFamily');
      var family = selector.options[selector.selectedIndex].value;
      var h1 = document.getElementById('sampleeditor')
      h1.style.fontFamily = family;
    }


    function saveAsTxt() {
      let text = document.getElementById('sampleeditor').innerText;
      let link = elt("a", {
        href: 'data:text/plain;charset=utf-8,' + encodeURIComponent(text),
        download: "pixelart.txt"
      });
      document.body.appendChild(link);
      link.click();
      link.remove();
    }
    function elt(type, props, ...children) {
      let dom = document.createElement(type);
      if (props) Object.assign(dom, props);
      for (let child of children) {
        if (typeof child != "string") dom.appendChild(child);
        else dom.appendChild(document.createTextNode(child));
      }
      return dom;
    }

    function paintPieChart(results) {
      let cx = document.querySelector("canvas").getContext("2d");
      let total = results.reduce((sum, { count }) => sum + count, 0);
      // Start at the top
      let currentAngle = -0.5 * Math.PI;
      for (let result of results) {
        let sliceAngle = (result.count / total) * 2 * Math.PI;
        cx.beginPath();
        // center=100,100, radius=100
        // from current angle, clockwise by slice's angle
        cx.arc(100, 100, 100,
          currentAngle, currentAngle + sliceAngle);
        currentAngle += sliceAngle;
        cx.lineTo(100, 100);
        cx.fillStyle = result.color;
        cx.fill();
      }

      cx.font = "28px Georgia";
      cx.fillStyle = "fuchsia";
      cx.fillText("I can draw text, too!", 10, 50);
    }


    function tableCreate() {
      let body = document.getElementById("sampleeditor");
      let tbl = document.createElement('table');

      tbl.contentEditable = true;
      tbl.style.width = '100px';
      tbl.style.border = '1px solid black';

      let rowNum = document.getElementById("rowNum");
      let columnNum = document.getElementById("columnNum");

      for (var i = 0; i < rowNum; i++) {
        var tr = tbl.insertRow();
        tr.style.border = '1px solid black';

        for (var j = 0; j < columnNum; j++) {

          var td = tr.insertCell();
          td.appendChild(document.createTextNode(''));
          td.style.border = '1px solid black';

        }
      }
      body.appendChild(tbl);

      let button = document.createElement("button");
      button.innerText = "generate a pie chart!";

      let results = [];

      for (var i in someData) {

        var item = someData[i];

        results.push({
          "name": item.firstName,
          "count": item.lastName,
          "color": item.age
        });
      }
      button.onclick = function () { paintPieChart(results) };
      body.appendChild(button);
    }
  </script>
</body>

</html>